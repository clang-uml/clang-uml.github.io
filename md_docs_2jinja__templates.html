<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="clang-uml" />
<meta property="og:image" content="clang-uml-logo.svg" />
<meta property="og:description" content="C++ to UML diagram generator based on Clang." />
<meta property="og:url" content="https://clang-uml.github.io/" />
<!-- END opengraph metadata -->
<title>clang-uml: Template engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>-->
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<!--<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>-->
<!--<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>-->
<!--<script type="text/javascript" src="toggle-alternative-theme.js"></script>-->
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    // DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    // DoxygenAwesomeInteractiveToc.init()
    // DoxygenAwesomeTabs.init()
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="github.min.css">
<script src="highlight.min.js"></script>
<script>
    $(function() {
        hljs.configure({useBR: false});
        $(".fragment").each(function(i,node) {
            var $node = $(node);
            // Only apply highlight.js to non-cpp code blocks
            if (!$node.hasClass("language-cpp")) {
                $node.html("<pre><code class='" +
                    $node.attr("class") + "'>" +
                    $node.text() + "</code></pre>");
                hljs.highlightElement(node);
            }
        });
    });
</script>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!--<a href="https://github.com/bkryza/clang-uml" class="github-corner" title="View source on GitHub" target="_blank">-->
<!--    <svg viewBox="0 0 250 250" width="70" height="70" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">-->
<!--    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>-->
<div id="top" style="background-color: gainsboro"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
      <a href="index.html">
          <img alt="Main page" src="clang-uml-logo.svg"/>
      </a>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
    <div id="projectname">
       <span id="projectnumber">0.3.9</span>
    </div>
    <div id="projectbrief">C++ to UML diagram generator based on Clang</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Template engine</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="template-engine"></a></p>
<ul>
<li><a class="el" href="md_docs_2jinja__templates.html#accessing-comment-content">Accessing comment content</a><ul>
<li><a class="el" href="md_docs_2jinja__templates.html#plain-comment-parser">'plain' comment parser</a></li>
<li><a class="el" href="md_docs_2jinja__templates.html#clang-comment-parser">'clang' comment parser</a></li>
</ul>
</li>
</ul>
<p><code>clang-uml</code> integrates <a href="https://github.com/pantor/inja">inja</a> template engine, with several additional functions which can be used in textual directives within the configuration files, notes and to generate links and tooltips in diagrams.</p>
<p>The following, are the <code>clang-uml</code> additional template functions:</p><ul>
<li><code>ltrim(string)</code> - left trims a string</li>
<li><code>rtrim(string)</code> - right trims a string</li>
<li><code>trim(string)</code> - trims a string</li>
<li><code>substr(string, offset, length)</code> - returns a substring of a string from offset of length</li>
<li><code>split(string)</code> - splits a string and returns a list of strings</li>
<li><code>replace(string, regex, replacement)</code> - returns a string with replace matches to regex with replacement string</li>
<li><code>abbrv(string, length)</code> - returns a string truncated to length including trailing ellipsis</li>
<li><code>element(string)</code> - returns the entire JSON context a given diagram element, including the following properties:<ul>
<li><code>name</code> - name of the element</li>
<li><code>type</code> - type of diagram element (e.g. <code>class</code>, <code>enum</code>, <code>package</code>)</li>
<li><code>namespace</code> - fully qualified element namespace</li>
<li><code>full_name</code> - fully qualified element name</li>
<li><code>comment</code> [optional] - elements comment, if any</li>
<li><code>alias</code> - internal diagram element alias (e.g. PlantUML alias)</li>
</ul>
</li>
<li><code>alias(string)</code> - returns a PlantUML alias of an C++ entity represented by string name</li>
<li><code>comment(string)</code> - returns a comment of an C++ entity represented by string name</li>
</ul>
<p>Templates allow complex postprocessing of the diagrams, for instance creation of customized PlantUML notes in the diagrams from comments in the code. Below is an example of using the above commands to generate notes in the PlantUML diagram from code comments (see also test case <a class="el" href="md_docs_2test__cases_2t00050.html">t00050</a>):</p>
<div class="fragment language-yaml"><div class="line">plantuml:</div>
<div class="line">  after:</div>
<div class="line">    # Add a note left of the `A` class with the entire clas comment as content</div>
<div class="line">    - &gt;</div>
<div class="line">       note left of {{ alias(&quot;A&quot;) }}</div>
<div class="line">          {{ comment(&quot;clanguml::t00050::A&quot;).formatted }}</div>
<div class="line">       end note</div>
<div class="line">    # Same as above</div>
<div class="line">    - &gt;</div>
<div class="line">      note right of {{ element(&quot;clanguml::t00050::A&quot;).alias }}</div>
<div class="line">         {% set e=element(&quot;clanguml::t00050::A&quot;) %} {{ e.comment.formatted }}</div>
<div class="line">      end note</div>
<div class="line">    # Add a note left of class &#39;C&#39; using trimmed text content from the class comment</div>
<div class="line">    - &gt;</div>
<div class="line">      note left of {{ alias(&quot;C&quot;) }} #AABBCC</div>
<div class="line">         {{ trim(comment(&quot;clanguml::t00050::C&quot;).text) }}</div>
<div class="line">      end note</div>
<div class="line">    # For each element in the diagram (class, template, enum):</div>
<div class="line">    #  - Add a note with \brief comment if exists</div>
<div class="line">    #  - Add a note with \todo for each element which has it</div>
<div class="line">    #  - Add a note with template parameter descriptions based on \tparam comment</div>
<div class="line">    - &gt;</div>
<div class="line">      {# Render brief comments and todos, if any were written for an element #}</div>
<div class="line">      {% for e in diagram.elements %}</div>
<div class="line">      {% if existsIn(e, &quot;comment&quot;) and existsIn(e.comment, &quot;brief&quot;) %}</div>
<div class="line"> </div>
<div class="line">      note top of {{ e.alias }} {% if e.type == &quot;class&quot; %} #22AA22 {% else %} #2222AA {% endif %}</div>
<div class="line">         {% set c=e.comment %} {{ c.brief.0 }}</div>
<div class="line">      end note</div>
<div class="line"> </div>
<div class="line">      {% endif %}</div>
<div class="line">      {% if existsIn(e, &quot;comment&quot;) and existsIn(e.comment, &quot;todo&quot;) %}</div>
<div class="line">      {% set c=e.comment %}</div>
<div class="line">      {% for t in c.todo %}</div>
<div class="line">      note top of {{ e.alias }} #882222</div>
<div class="line">         **TODO**</div>
<div class="line">         {{ t }}</div>
<div class="line">      end note</div>
<div class="line"> </div>
<div class="line">      {% endfor %}</div>
<div class="line"> </div>
<div class="line">      {% endif %}</div>
<div class="line">      {# Render template paramete if any #}</div>
<div class="line">      {% if existsIn(e, &quot;comment&quot;) and existsIn(e.comment, &quot;tparam&quot;) %}</div>
<div class="line">      {% set c=e.comment %}</div>
<div class="line"> </div>
<div class="line">      note top of {{ e.alias }} #AAAAFF</div>
<div class="line">         **Template parameters**</div>
<div class="line">         {% for tp in c.tparam %}</div>
<div class="line">         //{{ tp.name }}// {{ trim(tp.description) }}</div>
<div class="line">         {% endfor %}</div>
<div class="line">      end note</div>
<div class="line"> </div>
<div class="line">      {% endif %}</div>
<div class="line">      {% endfor %}</div>
</div><!-- fragment --><h2><a class="anchor" id="accessing-comment-content"></a>
Accessing comment content</h2>
<p>Text available in the code comment blocks can be accessed in the templates depending on the selected comment parser.</p>
<p>Currently there are 2 available comment parsers:</p><ul>
<li><code>plain</code> - default</li>
<li><code>clang</code> - Clang's comment parser</li>
</ul>
<p>They can be selected using <code>comment_parser</code> config option.</p>
<h3><a class="anchor" id="plain-comment-parser"></a>
'plain' comment parser</h3>
<p>This parser provides only 2 options to the Jinja context:</p><ul>
<li><code>comment.raw</code> - raw comment text, including comment markers such as <code>///</code> or <code>/**</code></li>
<li><code>comment.formatted</code> - formatted entire comment</li>
</ul>
<h3><a class="anchor" id="clang-comment-parser"></a>
'clang' comment parser</h3>
<p>This parser uses Clang comment parsing API to extract commands from the command:</p><ul>
<li><code>comment.raw</code> - raw comment text, including comment markers such as <code>///</code> or <code>/**</code></li>
<li><code>comment.formatted</code> - formatted entire comment</li>
<li><code>comment.&lt;command&gt;.&lt;N&gt;</code> - where command is the command used in the command e.g. <code>brief</code>, <code>todo</code>, etc. and <code>N</code> is the index of the command in the array (each comment can have multiple instances of the same command such as <code>\todo</code>)</li>
<li><code>comment.text</code> - entire text of the comment that is not attached to any command</li>
<li><code>comment.paragraph.&lt;N&gt;</code> - array of plain text paragraphs, for instance if you don't use <code>\brief</code> commands but often provide brief description as first sentence of the comment separated with a new line from the rest of the comment </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
    <small>
        <span class="copyright">&#160;&#160;Copyright &copy; 2022-present <a href="https://github.com/bkryza">Bartek Kryza</a>
        </span>
    Generated by&#160;
    <a href="https://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/>
    </a> 1.9.7
</small></address>
</body>
</html>